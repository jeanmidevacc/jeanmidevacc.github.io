<p>For this article, I am going to start the analysis of the data extracted with the pipeline explained on this article. The goal of this <a href="http://the-odd-dataguy.com/pubg1">article</a> is too:</p>
<ul>
  <li>Get an introduction to AWS athena</li>
  <li>Get insights on the data by using plotly</li>
  <li>Better understand the consumption of the video game PUBG</li>
</ul>

<h1 id="athena-aws">Athena AWS</h1>

<p>Athena is the service developed by Amazon to give the possibility to someone to easily query data from a S3 bucket without using servers or data warehouses. There is an example of the interface to use Athena on a web browser.</p>

<center>
<img src="/img/posts/pubg2/athena_overview.png" />
</center>

<p>The system developed is pretty open in terms of data format that can be used CSV, JSON, ORC, Avro, and Parquet.</p>

<p>The core of the system is build on <a href="https://prestodb.github.io/">Presto</a> that is defined as an open source distributed SQL query engine. One of the main user of this project is <a href="https://www.facebook.com/notes/facebook-engineering/presto-interacting-with-petabytes-of-data-at-facebook/10151786197628920/">Facebook</a> on various topics around interactive analytics, batch ETL, A/B testing and developer advertiser analytics.</p>

<p>There is a good <a href="https://research.fb.com/publications/presto-sql-on-everything/">article</a> about Presto that is entering more in details on the all the machinery of the engine.</p>

<p>Some other big users of this tool are <a href="https://medium.com/netflix-techblog/metacat-making-big-data-discoverable-and-meaningful-at-netflix-56fb36a53520">Netflix</a> and <a href="https://airbnb.io/projects/airpal/">Airbnb</a> that are building services around this kind of system.</p>

<p>If we go back to the Athena service, that arrived with the serverless system is the fact the billing is only based  data scanned. So really this combo S3  + Athena is a good mix for people who wants to handle a volume of data that can be consider “big” without handling all the infrastructure (that is a full time job).</p>

<p>To connect AWS Athena to a python script there is a package <a href="https://pypi.org/project/PyAthenaJDBC/">pyathenajdbc</a> that can be installed and will install a connector that can be use in a pandas dataframe. There is an example of a script to connect the data.</p>

<center>
<img src="/img/posts/pubg2/extract_code.png" />
</center>

<p>Let’s start the analysis of the data associated to PUBG.</p>

<h1 id="status-on-the-data-collected">Status on the data collected</h1>

<p>The pipe ran during more than a month between the 26th january 2019 and the 5th April 2019, this amount of time represent around 69000 matches so that a pretty interesting volume of data to handle (with the amount of events collected during the match).</p>

<p>In terms of area and platform, the pipe was focused to extract the data from the PC platform in north america.</p>

<h1 id="plotly-and-cufflinks">Plotly and cufflinks</h1>

<p>I am pretty big fan of plotly I did an <a href="http://the-odd-dataguy.com/metricsdash">article</a> last year on their Shiny like python package call <a href="https://plot.ly/products/dash/">Dash</a>, it’s really a cool package that make the building of dashboard more easier in Python.</p>

<p>Plotly is a really cool library to make interactive plot  but the syntax is a little bit long so there is people that have developed some plotly wrapper to facilitate the build a of a graph:</p>
<ul>
  <li>Cufflinks developed by Jorge Santos (and many contributors)</li>
  <li>Plotly express developed by plotly themselves</li>
</ul>

<p>For this article I have only used cufflinks but I am planning to make another article that will used plotly express.</p>

<h1 id="lets-dive-in-pubg">Let’s dive in PUBG</h1>

<p>To be honest there is multiples websites than have done similar analysis like <a href="https://pubgmap.io/">pubgmap.io</a> but it is still interesting to make different analysis and make some comparisons.</p>

<p>The mode that is the most popular is the squad one, and the map is Savage. For the following analysis , I am going to focus on the mode <strong>squad</strong>.</p>

<p>n term of duration , I took a sample of the match (1000 matches) for each map and there is some boxplots.</p>

<center>
<iframe width="800" height="600" frameborder="0" scrolling="no" src="//plot.ly/~jeanmidev/41.embed"></iframe>
</center>
