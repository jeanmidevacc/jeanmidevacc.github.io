<!DOCTYPE html>
<html class="no-js">

  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-104903671-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104903671-1');
</script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>the odd data guy | WIPDive in PUBG</title>
    <meta name="description" content="For this article, I am going to start the analysis of the data extracted with the pipeline explained on this article. The goal of this article is too:  Get a...">

    <link rel="stylesheet" href="/css/main.css">

    <link rel="canonical" href="http://localhost:4000/pubg2">
    <link rel="alternate" type="application/rss+xml" title="the odd data guy" href="http://localhost:4000/feed.xml" />

    <!--[if lt IE 9]>
        <script src="/js/vendor/html5shiv.min.js"></script>
    <![endif]-->
</head>


  <body class="">
    <!-- if the user has javascript disabled they can still use the menu -->
<noscript>
    <div class="no-js-menu clearfix">
        <ul>
            
                <li><i class="fa fa-home"></i><a href="/">Home</a></li>
            
                <li><i class="fa fa-anchor"></i><a href="/about">About</a></li>
            
        </ul>
    </div>
</noscript>
<!-- end no script -->

    <header class="hero-image" style="background-image: url(/img//header_img/benjamin-behre-429210-unsplash.jpg);">
    <span class="menu-trigger animated fadeInDown">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
    </span>

    <div id="menu-target">
    <ul>
        
            <li><i class="fa fa-home"></i><a href="/">Home</a></li>
        
            <li><i class="fa fa-anchor"></i><a href="/about">About</a></li>
        
    </ul>
</div>

</header>

<main class="container">
    <div class="row">
        <div class="col-xs-12 single-content">
            <p class="meta">
                <a href=""></a> in <a href='/category/dsml'>Dsml</a> <i class="link-spacer"></i> <i class="fa fa-bookmark"></i> 12 minutes
            </p>

            <h1>WIPDive in PUBG</h1>
            <h2>Application of AWS Athena and plotly to analyse PUBG data</h2>
            <p>For this article, I am going to start the analysis of the data extracted with the pipeline explained on this article. The goal of this <a href="http://the-odd-dataguy.com/pubg1">article</a> is too:</p>
<ul>
  <li>Get an introduction to AWS athena</li>
  <li>Get insights on the data by using plotly</li>
  <li>Better understand the consumption of the video game PUBG</li>
</ul>

<h1 id="athena-aws">Athena AWS</h1>

<p>Athena is the service developed by Amazon to give the possibility to someone to easily query data from a S3 bucket without using servers or data warehouses. There is an example of the interface to use Athena on a web browser.</p>

<center>
<img src="/img/posts/pubg2/athena_overview.png" />
</center>

<p>The system developed is pretty open in terms of data format that can be used CSV, JSON, ORC, Avro, and Parquet.</p>

<p>The core of the system is build on <a href="https://prestodb.github.io/">Presto</a> that is defined as an open source distributed SQL query engine. One of the main user of this project is <a href="https://www.facebook.com/notes/facebook-engineering/presto-interacting-with-petabytes-of-data-at-facebook/10151786197628920/">Facebook</a> on various topics around interactive analytics, batch ETL, A/B testing and developer advertiser analytics.</p>

<p>There is a good <a href="https://research.fb.com/publications/presto-sql-on-everything/">article</a> about Presto that is entering more in details on the all the machinery of the engine.</p>

<p>Some other big users of this tool are <a href="https://medium.com/netflix-techblog/metacat-making-big-data-discoverable-and-meaningful-at-netflix-56fb36a53520">Netflix</a> and <a href="https://airbnb.io/projects/airpal/">Airbnb</a> that are building services around this kind of system.</p>

<p>If we go back to the Athena service, that arrived with the serverless system is the fact the billing is only based  data scanned. So really this combo S3  + Athena is a good mix for people who wants to handle a volume of data that can be consider “big” without handling all the infrastructure (that is a full time job).</p>

<p>To connect AWS Athena to a python script there is a package <a href="https://pypi.org/project/PyAthenaJDBC/">pyathenajdbc</a> that can be installed and will install a connector that can be use in a pandas dataframe. There is an example of a script to connect the data.</p>

<center>
<img src="/img/posts/pubg2/extract_code.png" />
</center>

<p>Let’s start the analysis of the data associated to PUBG.</p>

<h1 id="status-on-the-data-collected">Status on the data collected</h1>

<p>The pipe ran during more than a month between the 26th january 2019 and the 5th April 2019, this amount of time represent around 69000 matches so that a pretty interesting volume of data to handle (with the amount of events collected during the match).</p>

<p>In terms of area and platform, the pipe was focused to extract the data from the PC platform in north america.</p>

<h1 id="plotly-and-cufflinks">Plotly and cufflinks</h1>

<p>I am pretty big fan of plotly I did an <a href="http://the-odd-dataguy.com/metricsdash">article</a> last year on their Shiny like python package call <a href="https://plot.ly/products/dash/">Dash</a>, it’s really a cool package that make the building of dashboard more easier in Python.</p>

<p>Plotly is a really cool library to make interactive plot  but the syntax is a little bit long so there is people that have developed some plotly wrapper to facilitate the build a of a graph:</p>
<ul>
  <li>Cufflinks developed by Jorge Santos (and many contributors)</li>
  <li>Plotly express developed by plotly themselves</li>
</ul>

<p>For this article I have only used cufflinks but I am planning to make another article that will used plotly express.</p>

<h1 id="lets-dive-in-pubg">Let’s dive in PUBG</h1>

<p>To be honest there is multiples websites than have done similar analysis like <a href="https://pubgmap.io/">pubgmap.io</a> but it is still interesting to make different analysis and make some comparisons.</p>

<p>The mode that is the most popular is the squad one, and the map is Savage. For the following analysis , I am going to focus on the mode <strong>squad</strong>.</p>

<p>n term of duration , I took a sample of the match (1000 matches) for each map and there is some boxplots.</p>

<center>
<iframe width="800" height="600" frameborder="0" scrolling="no" src="//plot.ly/~jeanmidev/41.embed"></iframe>
</center>

<p>The map Savage looks to have a different comportment on the duration, that could be explained by the size that is way smaller than the other ones (there is like a 5 minutes differential for the median).</p>

<p>For the lifespan of the players, in the following figure there is the representation of the percentage of player alive VS the completion of the match in function of the map.</p>

<center>
<iframe width="800" height="600" frameborder="0" scrolling="no" src="//plot.ly/~jeanmidev/33.embed"></iframe>
</center>

<p>At the beginning of the match , most of the players stay alive that is related to the landing moment of all the players in the match so no kill but a few percentage there is a split that’s happening between all the maps. There is a clear differentiation between the different maps i n term of players killed over time, the Savage map looks the one that is the most abrupt in terms of death after the landing.</p>

<p>In the same topics of death, in terms of weapons used to kill there is the distribution of number of kills per weapons register during the periods.</p>

<center>
<iframe width="800" height="600" frameborder="0" scrolling="no" src="//plot.ly/~jeanmidev/35.embed"></iframe>
</center>

<p>The most popular weapons seems to be the AK47, and there is a lot of rifles in the top of the weapons.What is really interesting with the events associated to the kill, there is localisation elements where the hit is localised on the body of the victim.</p>

<p>The most popular weapons seems to be the AK47, and there is a lot of rifles in the top of the weapons.What is really interesting with the events associated to the kill, there is localisation elements where the hit is localised on the body of the victim.</p>

<center>
<iframe width="800" height="600" frameborder="0" scrolling="no" src="//plot.ly/~jeanmidev/39.embed"></iframe>
</center>

<p>The portion of headshot is different in function of the weapon, the two first weapons that seems to be the more precise are sniper rifle so that make sense.</p>

<p>Another interesting insights is that it seems that there is some weapons that are map specific, in the following figure there is a distribution of the weapons per map.</p>

<center>
<iframe width="800" height="600" frameborder="0" scrolling="no" src="//plot.ly/~jeanmidev/37.embed"></iframe>
</center>

<p>With this representation , there is a distribution of the kills per maps and there is the illustration than some weapons are map specific but in general some map are more used to kill in some specific map that could be the mark of a distribution of the equipment that is differing in function of the map</p>

<p>And to finish I just decide to have an overview of the heal and booster usage in the game, there is in the following figure the evolution of the events to use an heal object and a booster object in function of the completion of the match.</p>

<center>
<iframe width="800" height="600" frameborder="0" scrolling="no" src="//plot.ly/~jeanmidev/57.embed"></iframe>
</center>

<p>For the booster, there is definitely a peak around 40% of the match, but for the heal object there is a first bump in the 15% that refer to the first wave of eliminated player , the peak is on the middle of the match with a second phase of elimination. If we compare the percentage of player alive figure with this one there another story that can be tell i n terms of player behaviour.</p>

<p>This article was an introduction to more works that I am going to do with the data collected from pubg, i will give a focus on a future article on pubg about the position data and interest points that can be detected during a match.</p>


        </div><!-- main-content/col -->
    </div> <!--/row -->
    
<div id="disqus_thread" class="container"></div>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
// var disqus_config = function () {
// this.page.url = 'http://localhost:4000/pubg2';
// this.page.identifier = 'http://localhost:4000/pubg2';
// };
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://jmdaignan.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</main> <!-- /container -->








<footer class="single">
    <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-4">
            <div class="social">
                <p>Share this article</a>
                <div class="social-links">
                    <a class="social-icon" href="#" data-platform="twitter" data-message="" data-url="http://localhost:4000/pubg2"><i class="fa fa-twitter"></i></a>

                    <a class="social-icon" href="#" data-platform="facebook" data-message="" data-url="http://localhost:4000/pubg2"><i class="fa fa-facebook-official"></i></a>
                    <a class="social-icon" data-platform="mail"  href="mailto:daignanjm@gmail.com?body=http://localhost:4000/pubg2"><i class="fa fa-envelope"></i></a>
                </div>
            </div>
        </div>
    </div><!-- end row -->
</div>


    
</footer>


    <script src='/js/vendor/modernizr.custom.32229-2.8-respondjs-1-4-2.js'></script>
    <script src="/js/vendor/jquery-1.11.2.min.js"></script>
    <script src='/js/vendor/jquery.jpanelmenu.min.js'></script>
    <script type='application/javascript' src='/js/vendor/fastclick.min.js'></script>
    
    <script src=' /js/main.js'></script>
  </body>

</html>
